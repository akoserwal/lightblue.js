!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.lightblue=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/home/ahenning/code/lightblue-js/lib/clientutil.js":[function(require,module,exports){
exports.resolve=function(){function e(e){return"string"!=typeof e?"":(e=e.replace(new RegExp("^/*"),""),e=e.replace(new RegExp("/*$"),""))}function n(e){return"undefined"!=typeof e&&""!==e}return 0===arguments.length?"":Array.prototype.slice.call(arguments,0).filter(n).map(e).join("/")};
},{}],"/home/ahenning/code/lightblue-js/lib/data.js":[function(require,module,exports){
function LightblueDataClient(e){this.host=e}function FindRequest(e,t){var o=resolve(e,"find",t.entity,t.version),s={objectType:t.entity,version:t.version,query:t.query,projection:t.projection};t.sort&&(s.sort=t.sort),t.range&&(s.range=t.range),RestRequest.call(this,"post",o,s)}function InsertRequest(e,t){var o=resolve(e,"insert",t.entity,t.version),s={objectType:t.entity,version:t.version,data:t.data,projection:t.projection};RestRequest.call(this,"put",o,s)}function SaveRequest(e,t){var o=resolve(e,"save",t.entity,t.version),s={objectType:t.entity,version:t.version,data:t.data,upsert:t.upsert,projection:t.projection};RestRequest.call(this,"post",o,s)}function UpdateRequest(e,t){var o=resolve(e,"update",t.entity,t.version),s={objectType:t.entity,version:t.version,query:t.query,update:t.update,projection:t.projection};RestRequest.call(this,"post",o,s)}function DeleteRequest(e,t){var o=resolve(e,"delete",t.entity,t.version),s={objectType:t.entity,version:t.version,query:t.query};RestRequest.call(this,"post",o,s)}var resolve=require("./clientutil").resolve,RestRequest=require("./rest").RestRequest;module.exports=LightblueDataClient,LightblueDataClient.prototype.find=function(e){return new FindRequest(this.host,e)},LightblueDataClient.prototype.insert=function(e){return new InsertRequest(this.host,e)},LightblueDataClient.prototype.update=function(e){return new UpdateRequest(this.host,e)},LightblueDataClient.prototype.save=function(e){return new SaveRequest(this.host,e)},LightblueDataClient.prototype.delete=function(e){return new DeleteRequest(this.host,e)},FindRequest.prototype=Object.create(RestRequest.prototype),FindRequest.prototype.constructor=FindRequest,InsertRequest.prototype=Object.create(RestRequest.prototype),InsertRequest.prototype.constructor=InsertRequest,SaveRequest.prototype=Object.create(RestRequest.prototype),SaveRequest.prototype.constructor=SaveRequest,UpdateRequest.prototype=Object.create(RestRequest.prototype),UpdateRequest.prototype.constructor=UpdateRequest,DeleteRequest.prototype=Object.create(RestRequest.prototype),DeleteRequest.prototype.constructor=DeleteRequest;
},{"./clientutil":"/home/ahenning/code/lightblue-js/lib/clientutil.js","./rest":"/home/ahenning/code/lightblue-js/lib/rest.js"}],"/home/ahenning/code/lightblue-js/lib/lightblue.js":[function(require,module,exports){
function LightblueClient(e,t){this.data=e,this.metadata=t}function getDataClient(e){return new DataClient(e)}function getMetadataClient(e){return new MetadataClient(e)}function getClient(e,t){"undefined"==typeof t&&(e=resolve(e,"data"),t=resolve(e,"metadata"));var a=getDataClient(e),i=getMetadataClient(t);return new LightblueClient(a,i)}var DataClient=require("./data.js"),MetadataClient=require("./metadata.js"),query=require("./query.js"),resolve=require("./clientutil.js").resolve;exports.getDataClient=getDataClient,exports.getClient=getClient,exports.field=query.field;
},{"./clientutil.js":"/home/ahenning/code/lightblue-js/lib/clientutil.js","./data.js":"/home/ahenning/code/lightblue-js/lib/data.js","./metadata.js":"/home/ahenning/code/lightblue-js/lib/metadata.js","./query.js":"/home/ahenning/code/lightblue-js/lib/query.js"}],"/home/ahenning/code/lightblue-js/lib/metadata.js":[function(require,module,exports){
function LightblueMetadataClient(e){this.host=e}function NamesRequest(e,t){var s=t&&t.length>0?"s="+t.join(","):"";RestRequest.call(this,"get",resolve(e,s))}function VersionsRequest(e,t){if("undefined"==typeof t)throw new Error("entityName required for versions request.");RestRequest.call(this,"get",resolve(e,t))}function RolesRequest(e,t,s){RestRequest.call(this,"get",resolve(e,t,s,"roles"))}var resolve=require("./clientutil").resolve,RestRequest=require("./rest").RestRequest;module.exports=LightblueMetadataClient,LightblueMetadataClient.prototype.getNames=function(e){return new NamesRequest(this.host,e)},LightblueMetadataClient.prototype.getVersions=function(e){return new VersionsRequest(this.host,e)},LightblueMetadataClient.prototype.getRoles=function(e,t){return new RolesRequest(this.host,e,t)},NamesRequest.prototype=Object.create(RestRequest.prototype),NamesRequest.prototype.constructor=NamesRequest,VersionsRequest.prototype=Object.create(RestRequest.prototype),VersionsRequest.prototype.constructor=VersionsRequest,RolesRequest.prototype=Object.create(RestRequest.prototype),RolesRequest.prototype.constructor=RolesRequest;
},{"./clientutil":"/home/ahenning/code/lightblue-js/lib/clientutil.js","./rest":"/home/ahenning/code/lightblue-js/lib/rest.js"}],"/home/ahenning/code/lightblue-js/lib/query.js":[function(require,module,exports){
function QueryExpression(o){o instanceof Object&&(this.json=o)}function NaryLogicalExpression(o,r){if(this.op=o,this.expressions=r||[],r instanceof Array){var e={};e[o]=r.map(function(o){return o.toJSON()})}QueryExpression.call(this,e)}function AndExpression(o){o instanceof Array||(o=Array.prototype.slice.call(arguments,0)),NaryLogicalExpression.call(this,"$and",o)}function OrExpression(o){o instanceof Array||(o=Array.prototype.slice.call(arguments,0)),NaryLogicalExpression.call(this,"$or",o)}function Field(o){this.field=o}function FieldComparison(o,r,e){QueryExpression.call(this,{field:o,op:r,rfield:e})}function ValueComparison(o,r,e){QueryExpression.call(this,{field:o,op:r,rvalue:e})}module.exports.field=function(o){return new Field(o)},QueryExpression.prototype.and=function(o){return new AndExpression(this,o)},QueryExpression.prototype.or=function(o){return new OrExpression(this,o)},QueryExpression.prototype.toJSON=function(){return this.json},NaryLogicalExpression.prototype=new QueryExpression,NaryLogicalExpression.prototype.constructor=NaryLogicalExpression,AndExpression.prototype=new NaryLogicalExpression,AndExpression.prototype.constructor=AndExpression,AndExpression.prototype.and=function(o){return new AndExpression(this.expressions.concat(o))},OrExpression.prototype=new NaryLogicalExpression,OrExpression.prototype.constructor=OrExpression,OrExpression.prototype.or=function(o){return new OrExpression(this.expressions.concat(o))},Field.prototype.__comparison=function(o,r){return r instanceof Field?new FieldComparison(this.field,o,r.field):new ValueComparison(this.field,o,r)},Field.prototype.equalTo=Field.prototype.eq=function(o){return this.__comparison("$eq",o)},Field.prototype.greaterThan=Field.prototype.gt=function(o){return this.__comparison("$gt",o)},FieldComparison.prototype=new QueryExpression,FieldComparison.prototype.constructor=FieldComparison,ValueComparison.prototype=new QueryExpression,ValueComparison.prototype.constructor=ValueComparison;
},{}],"/home/ahenning/code/lightblue-js/lib/rest.js":[function(require,module,exports){
exports.RestRequest=function(t,e,s){this.method="string"==typeof t?t.toLowerCase():"",this.METHOD=this.method.toUpperCase(),this.body=s,this.url=e};
},{}]},{},["/home/ahenning/code/lightblue-js/lib/lightblue.js"])("/home/ahenning/code/lightblue-js/lib/lightblue.js")
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvY2xpZW50dXRpbC5qcyIsImxpYi9kYXRhLmpzIiwibGliL2xpZ2h0Ymx1ZS5qcyIsImxpYi9tZXRhZGF0YS5qcyIsImxpYi9xdWVyeS5qcyIsImxpYi9yZXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUE7O0FDQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0cy5yZXNvbHZlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgZT9cIlwiOihlPWUucmVwbGFjZShuZXcgUmVnRXhwKFwiXi8qXCIpLFwiXCIpLGU9ZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIvKiRcIiksXCJcIikpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUmJlwiXCIhPT1lfXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD9cIlwiOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKS5maWx0ZXIobikubWFwKGUpLmpvaW4oXCIvXCIpfTsiLCJmdW5jdGlvbiBMaWdodGJsdWVEYXRhQ2xpZW50KGUpe3RoaXMuaG9zdD1lfWZ1bmN0aW9uIEZpbmRSZXF1ZXN0KGUsdCl7dmFyIG89cmVzb2x2ZShlLFwiZmluZFwiLHQuZW50aXR5LHQudmVyc2lvbikscz17b2JqZWN0VHlwZTp0LmVudGl0eSx2ZXJzaW9uOnQudmVyc2lvbixxdWVyeTp0LnF1ZXJ5LHByb2plY3Rpb246dC5wcm9qZWN0aW9ufTt0LnNvcnQmJihzLnNvcnQ9dC5zb3J0KSx0LnJhbmdlJiYocy5yYW5nZT10LnJhbmdlKSxSZXN0UmVxdWVzdC5jYWxsKHRoaXMsXCJwb3N0XCIsbyxzKX1mdW5jdGlvbiBJbnNlcnRSZXF1ZXN0KGUsdCl7dmFyIG89cmVzb2x2ZShlLFwiaW5zZXJ0XCIsdC5lbnRpdHksdC52ZXJzaW9uKSxzPXtvYmplY3RUeXBlOnQuZW50aXR5LHZlcnNpb246dC52ZXJzaW9uLGRhdGE6dC5kYXRhLHByb2plY3Rpb246dC5wcm9qZWN0aW9ufTtSZXN0UmVxdWVzdC5jYWxsKHRoaXMsXCJwdXRcIixvLHMpfWZ1bmN0aW9uIFNhdmVSZXF1ZXN0KGUsdCl7dmFyIG89cmVzb2x2ZShlLFwic2F2ZVwiLHQuZW50aXR5LHQudmVyc2lvbikscz17b2JqZWN0VHlwZTp0LmVudGl0eSx2ZXJzaW9uOnQudmVyc2lvbixkYXRhOnQuZGF0YSx1cHNlcnQ6dC51cHNlcnQscHJvamVjdGlvbjp0LnByb2plY3Rpb259O1Jlc3RSZXF1ZXN0LmNhbGwodGhpcyxcInBvc3RcIixvLHMpfWZ1bmN0aW9uIFVwZGF0ZVJlcXVlc3QoZSx0KXt2YXIgbz1yZXNvbHZlKGUsXCJ1cGRhdGVcIix0LmVudGl0eSx0LnZlcnNpb24pLHM9e29iamVjdFR5cGU6dC5lbnRpdHksdmVyc2lvbjp0LnZlcnNpb24scXVlcnk6dC5xdWVyeSx1cGRhdGU6dC51cGRhdGUscHJvamVjdGlvbjp0LnByb2plY3Rpb259O1Jlc3RSZXF1ZXN0LmNhbGwodGhpcyxcInBvc3RcIixvLHMpfWZ1bmN0aW9uIERlbGV0ZVJlcXVlc3QoZSx0KXt2YXIgbz1yZXNvbHZlKGUsXCJkZWxldGVcIix0LmVudGl0eSx0LnZlcnNpb24pLHM9e29iamVjdFR5cGU6dC5lbnRpdHksdmVyc2lvbjp0LnZlcnNpb24scXVlcnk6dC5xdWVyeX07UmVzdFJlcXVlc3QuY2FsbCh0aGlzLFwicG9zdFwiLG8scyl9dmFyIHJlc29sdmU9cmVxdWlyZShcIi4vY2xpZW50dXRpbFwiKS5yZXNvbHZlLFJlc3RSZXF1ZXN0PXJlcXVpcmUoXCIuL3Jlc3RcIikuUmVzdFJlcXVlc3Q7bW9kdWxlLmV4cG9ydHM9TGlnaHRibHVlRGF0YUNsaWVudCxMaWdodGJsdWVEYXRhQ2xpZW50LnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgRmluZFJlcXVlc3QodGhpcy5ob3N0LGUpfSxMaWdodGJsdWVEYXRhQ2xpZW50LnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBJbnNlcnRSZXF1ZXN0KHRoaXMuaG9zdCxlKX0sTGlnaHRibHVlRGF0YUNsaWVudC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgVXBkYXRlUmVxdWVzdCh0aGlzLmhvc3QsZSl9LExpZ2h0Ymx1ZURhdGFDbGllbnQucHJvdG90eXBlLnNhdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBTYXZlUmVxdWVzdCh0aGlzLmhvc3QsZSl9LExpZ2h0Ymx1ZURhdGFDbGllbnQucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IERlbGV0ZVJlcXVlc3QodGhpcy5ob3N0LGUpfSxGaW5kUmVxdWVzdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShSZXN0UmVxdWVzdC5wcm90b3R5cGUpLEZpbmRSZXF1ZXN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1GaW5kUmVxdWVzdCxJbnNlcnRSZXF1ZXN0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFJlc3RSZXF1ZXN0LnByb3RvdHlwZSksSW5zZXJ0UmVxdWVzdC5wcm90b3R5cGUuY29uc3RydWN0b3I9SW5zZXJ0UmVxdWVzdCxTYXZlUmVxdWVzdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShSZXN0UmVxdWVzdC5wcm90b3R5cGUpLFNhdmVSZXF1ZXN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1TYXZlUmVxdWVzdCxVcGRhdGVSZXF1ZXN0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFJlc3RSZXF1ZXN0LnByb3RvdHlwZSksVXBkYXRlUmVxdWVzdC5wcm90b3R5cGUuY29uc3RydWN0b3I9VXBkYXRlUmVxdWVzdCxEZWxldGVSZXF1ZXN0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFJlc3RSZXF1ZXN0LnByb3RvdHlwZSksRGVsZXRlUmVxdWVzdC5wcm90b3R5cGUuY29uc3RydWN0b3I9RGVsZXRlUmVxdWVzdDsiLCJmdW5jdGlvbiBMaWdodGJsdWVDbGllbnQoZSx0KXt0aGlzLmRhdGE9ZSx0aGlzLm1ldGFkYXRhPXR9ZnVuY3Rpb24gZ2V0RGF0YUNsaWVudChlKXtyZXR1cm4gbmV3IERhdGFDbGllbnQoZSl9ZnVuY3Rpb24gZ2V0TWV0YWRhdGFDbGllbnQoZSl7cmV0dXJuIG5ldyBNZXRhZGF0YUNsaWVudChlKX1mdW5jdGlvbiBnZXRDbGllbnQoZSx0KXtcInVuZGVmaW5lZFwiPT10eXBlb2YgdCYmKGU9cmVzb2x2ZShlLFwiZGF0YVwiKSx0PXJlc29sdmUoZSxcIm1ldGFkYXRhXCIpKTt2YXIgYT1nZXREYXRhQ2xpZW50KGUpLGk9Z2V0TWV0YWRhdGFDbGllbnQodCk7cmV0dXJuIG5ldyBMaWdodGJsdWVDbGllbnQoYSxpKX12YXIgRGF0YUNsaWVudD1yZXF1aXJlKFwiLi9kYXRhLmpzXCIpLE1ldGFkYXRhQ2xpZW50PXJlcXVpcmUoXCIuL21ldGFkYXRhLmpzXCIpLHF1ZXJ5PXJlcXVpcmUoXCIuL3F1ZXJ5LmpzXCIpLHJlc29sdmU9cmVxdWlyZShcIi4vY2xpZW50dXRpbC5qc1wiKS5yZXNvbHZlO2V4cG9ydHMuZ2V0RGF0YUNsaWVudD1nZXREYXRhQ2xpZW50LGV4cG9ydHMuZ2V0Q2xpZW50PWdldENsaWVudCxleHBvcnRzLmZpZWxkPXF1ZXJ5LmZpZWxkOyIsImZ1bmN0aW9uIExpZ2h0Ymx1ZU1ldGFkYXRhQ2xpZW50KGUpe3RoaXMuaG9zdD1lfWZ1bmN0aW9uIE5hbWVzUmVxdWVzdChlLHQpe3ZhciBzPXQmJnQubGVuZ3RoPjA/XCJzPVwiK3Quam9pbihcIixcIik6XCJcIjtSZXN0UmVxdWVzdC5jYWxsKHRoaXMsXCJnZXRcIixyZXNvbHZlKGUscykpfWZ1bmN0aW9uIFZlcnNpb25zUmVxdWVzdChlLHQpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcihcImVudGl0eU5hbWUgcmVxdWlyZWQgZm9yIHZlcnNpb25zIHJlcXVlc3QuXCIpO1Jlc3RSZXF1ZXN0LmNhbGwodGhpcyxcImdldFwiLHJlc29sdmUoZSx0KSl9ZnVuY3Rpb24gUm9sZXNSZXF1ZXN0KGUsdCxzKXtSZXN0UmVxdWVzdC5jYWxsKHRoaXMsXCJnZXRcIixyZXNvbHZlKGUsdCxzLFwicm9sZXNcIikpfXZhciByZXNvbHZlPXJlcXVpcmUoXCIuL2NsaWVudHV0aWxcIikucmVzb2x2ZSxSZXN0UmVxdWVzdD1yZXF1aXJlKFwiLi9yZXN0XCIpLlJlc3RSZXF1ZXN0O21vZHVsZS5leHBvcnRzPUxpZ2h0Ymx1ZU1ldGFkYXRhQ2xpZW50LExpZ2h0Ymx1ZU1ldGFkYXRhQ2xpZW50LnByb3RvdHlwZS5nZXROYW1lcz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IE5hbWVzUmVxdWVzdCh0aGlzLmhvc3QsZSl9LExpZ2h0Ymx1ZU1ldGFkYXRhQ2xpZW50LnByb3RvdHlwZS5nZXRWZXJzaW9ucz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFZlcnNpb25zUmVxdWVzdCh0aGlzLmhvc3QsZSl9LExpZ2h0Ymx1ZU1ldGFkYXRhQ2xpZW50LnByb3RvdHlwZS5nZXRSb2xlcz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgUm9sZXNSZXF1ZXN0KHRoaXMuaG9zdCxlLHQpfSxOYW1lc1JlcXVlc3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUmVzdFJlcXVlc3QucHJvdG90eXBlKSxOYW1lc1JlcXVlc3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPU5hbWVzUmVxdWVzdCxWZXJzaW9uc1JlcXVlc3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUmVzdFJlcXVlc3QucHJvdG90eXBlKSxWZXJzaW9uc1JlcXVlc3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPVZlcnNpb25zUmVxdWVzdCxSb2xlc1JlcXVlc3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUmVzdFJlcXVlc3QucHJvdG90eXBlKSxSb2xlc1JlcXVlc3QucHJvdG90eXBlLmNvbnN0cnVjdG9yPVJvbGVzUmVxdWVzdDsiLCJmdW5jdGlvbiBRdWVyeUV4cHJlc3Npb24obyl7byBpbnN0YW5jZW9mIE9iamVjdCYmKHRoaXMuanNvbj1vKX1mdW5jdGlvbiBOYXJ5TG9naWNhbEV4cHJlc3Npb24obyxyKXtpZih0aGlzLm9wPW8sdGhpcy5leHByZXNzaW9ucz1yfHxbXSxyIGluc3RhbmNlb2YgQXJyYXkpe3ZhciBlPXt9O2Vbb109ci5tYXAoZnVuY3Rpb24obyl7cmV0dXJuIG8udG9KU09OKCl9KX1RdWVyeUV4cHJlc3Npb24uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIEFuZEV4cHJlc3Npb24obyl7byBpbnN0YW5jZW9mIEFycmF5fHwobz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpLE5hcnlMb2dpY2FsRXhwcmVzc2lvbi5jYWxsKHRoaXMsXCIkYW5kXCIsbyl9ZnVuY3Rpb24gT3JFeHByZXNzaW9uKG8pe28gaW5zdGFuY2VvZiBBcnJheXx8KG89QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKSxOYXJ5TG9naWNhbEV4cHJlc3Npb24uY2FsbCh0aGlzLFwiJG9yXCIsbyl9ZnVuY3Rpb24gRmllbGQobyl7dGhpcy5maWVsZD1vfWZ1bmN0aW9uIEZpZWxkQ29tcGFyaXNvbihvLHIsZSl7UXVlcnlFeHByZXNzaW9uLmNhbGwodGhpcyx7ZmllbGQ6byxvcDpyLHJmaWVsZDplfSl9ZnVuY3Rpb24gVmFsdWVDb21wYXJpc29uKG8scixlKXtRdWVyeUV4cHJlc3Npb24uY2FsbCh0aGlzLHtmaWVsZDpvLG9wOnIscnZhbHVlOmV9KX1tb2R1bGUuZXhwb3J0cy5maWVsZD1mdW5jdGlvbihvKXtyZXR1cm4gbmV3IEZpZWxkKG8pfSxRdWVyeUV4cHJlc3Npb24ucHJvdG90eXBlLmFuZD1mdW5jdGlvbihvKXtyZXR1cm4gbmV3IEFuZEV4cHJlc3Npb24odGhpcyxvKX0sUXVlcnlFeHByZXNzaW9uLnByb3RvdHlwZS5vcj1mdW5jdGlvbihvKXtyZXR1cm4gbmV3IE9yRXhwcmVzc2lvbih0aGlzLG8pfSxRdWVyeUV4cHJlc3Npb24ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmpzb259LE5hcnlMb2dpY2FsRXhwcmVzc2lvbi5wcm90b3R5cGU9bmV3IFF1ZXJ5RXhwcmVzc2lvbixOYXJ5TG9naWNhbEV4cHJlc3Npb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPU5hcnlMb2dpY2FsRXhwcmVzc2lvbixBbmRFeHByZXNzaW9uLnByb3RvdHlwZT1uZXcgTmFyeUxvZ2ljYWxFeHByZXNzaW9uLEFuZEV4cHJlc3Npb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPUFuZEV4cHJlc3Npb24sQW5kRXhwcmVzc2lvbi5wcm90b3R5cGUuYW5kPWZ1bmN0aW9uKG8pe3JldHVybiBuZXcgQW5kRXhwcmVzc2lvbih0aGlzLmV4cHJlc3Npb25zLmNvbmNhdChvKSl9LE9yRXhwcmVzc2lvbi5wcm90b3R5cGU9bmV3IE5hcnlMb2dpY2FsRXhwcmVzc2lvbixPckV4cHJlc3Npb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPU9yRXhwcmVzc2lvbixPckV4cHJlc3Npb24ucHJvdG90eXBlLm9yPWZ1bmN0aW9uKG8pe3JldHVybiBuZXcgT3JFeHByZXNzaW9uKHRoaXMuZXhwcmVzc2lvbnMuY29uY2F0KG8pKX0sRmllbGQucHJvdG90eXBlLl9fY29tcGFyaXNvbj1mdW5jdGlvbihvLHIpe3JldHVybiByIGluc3RhbmNlb2YgRmllbGQ/bmV3IEZpZWxkQ29tcGFyaXNvbih0aGlzLmZpZWxkLG8sci5maWVsZCk6bmV3IFZhbHVlQ29tcGFyaXNvbih0aGlzLmZpZWxkLG8scil9LEZpZWxkLnByb3RvdHlwZS5lcXVhbFRvPUZpZWxkLnByb3RvdHlwZS5lcT1mdW5jdGlvbihvKXtyZXR1cm4gdGhpcy5fX2NvbXBhcmlzb24oXCIkZXFcIixvKX0sRmllbGQucHJvdG90eXBlLmdyZWF0ZXJUaGFuPUZpZWxkLnByb3RvdHlwZS5ndD1mdW5jdGlvbihvKXtyZXR1cm4gdGhpcy5fX2NvbXBhcmlzb24oXCIkZ3RcIixvKX0sRmllbGRDb21wYXJpc29uLnByb3RvdHlwZT1uZXcgUXVlcnlFeHByZXNzaW9uLEZpZWxkQ29tcGFyaXNvbi5wcm90b3R5cGUuY29uc3RydWN0b3I9RmllbGRDb21wYXJpc29uLFZhbHVlQ29tcGFyaXNvbi5wcm90b3R5cGU9bmV3IFF1ZXJ5RXhwcmVzc2lvbixWYWx1ZUNvbXBhcmlzb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPVZhbHVlQ29tcGFyaXNvbjsiLCJleHBvcnRzLlJlc3RSZXF1ZXN0PWZ1bmN0aW9uKHQsZSxzKXt0aGlzLm1ldGhvZD1cInN0cmluZ1wiPT10eXBlb2YgdD90LnRvTG93ZXJDYXNlKCk6XCJcIix0aGlzLk1FVEhPRD10aGlzLm1ldGhvZC50b1VwcGVyQ2FzZSgpLHRoaXMuYm9keT1zLHRoaXMudXJsPWV9OyJdfQ==
